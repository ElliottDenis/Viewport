"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/send/page",{

/***/ "(app-pages-browser)/./components/UploadForm.tsx":
/*!***********************************!*\
  !*** ./components/UploadForm.tsx ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ UploadForm; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n// components/UploadForm.tsx\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\nconst MAX_FILE_BYTES = 10 * 1024 * 1024;\nvar _process_env_NEXT_PUBLIC_STORAGE_BUCKET;\nconst BUCKET = (_process_env_NEXT_PUBLIC_STORAGE_BUCKET = \"locker\") !== null && _process_env_NEXT_PUBLIC_STORAGE_BUCKET !== void 0 ? _process_env_NEXT_PUBLIC_STORAGE_BUCKET : \"locker\";\nfunction UploadForm() {\n    _s();\n    const [file, setFile] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [text, setText] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [code, setCode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [pin, setPin] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [accounts, setAccounts] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [selectedTarget, setSelectedTarget] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"general\");\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [sessionToken, setSessionToken] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // inside your UploadForm component useEffect\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let mounted = true;\n        async function loadAccounts() {\n            try {\n                // no-store ensures we always get the latest from server\n                const res = await fetch(\"/api/accounts\", {\n                    cache: \"no-store\"\n                });\n                if (!res.ok) {\n                    console.error(\"Failed to load accounts:\", await res.text());\n                    return;\n                }\n                const list = await res.json();\n                // defensive filtering\n                const valid = (list || []).filter((a)=>{\n                    var _a_display_name;\n                    return a && a.id && ((_a_display_name = a.display_name) !== null && _a_display_name !== void 0 ? _a_display_name : a.name);\n                });\n                if (mounted) setAccounts(valid);\n            } catch (e) {\n                console.error(\"loadAccounts error:\", e);\n            }\n        }\n        loadAccounts();\n        return ()=>{\n            mounted = false;\n        };\n    }, []);\n    function sanitizeFilename(name) {\n        return name.replace(/\\s+/g, \"_\").replace(/[^A-Za-z0-9._-]/g, \"\");\n    }\n    async function handleSubmit(e) {\n        e.preventDefault();\n        setStatus(null);\n        setCode(null);\n        setPin(null);\n        if (!file && !text.trim()) {\n            setStatus(\"Please attach a file or enter some text to share.\");\n            return;\n        }\n        if (file && file.size > MAX_FILE_BYTES) {\n            setStatus(\"File too large — max \".concat((MAX_FILE_BYTES / 1024 / 1024).toFixed(1), \" MB.\"));\n            return;\n        }\n        try {\n            setStatus(\"Creating object metadata on server...\");\n            const kind = file ? file.type.startsWith(\"image/\") ? \"image\" : \"doc\" : \"text\";\n            const recipient_account_id = selectedTarget !== \"general\" && selectedTarget !== \"public\" ? selectedTarget : null;\n            const pin_protected = selectedTarget === \"general\";\n            const createBody = {\n                kind,\n                title: file ? file.name : text.slice(0, 80) || \"Untitled\",\n                mime_type: file ? file.type : null,\n                bytes: file ? file.size : null,\n                text_content: !file ? text : null,\n                filename: file ? sanitizeFilename(file.name) : undefined,\n                recipient_account_id,\n                channel: selectedTarget,\n                pin_protected,\n                uploader_user_id: currentUserId !== null && currentUserId !== void 0 ? currentUserId : undefined\n            };\n            const createRes = await fetch(\"/api/objects\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(createBody)\n            });\n            const createText = await createRes.text();\n            if (!createRes.ok) {\n                setStatus(\"Failed to create object: \" + createText);\n                return;\n            }\n            const createJson = JSON.parse(createText);\n            const { id, storage_path: serverStoragePath, code: returnedCode, pin: returnedPin } = createJson;\n            // upload file if present\n            if (file) {\n                setStatus(\"Requesting signed upload URL...\");\n                const path = (serverStoragePath !== null && serverStoragePath !== void 0 ? serverStoragePath : \"objects/\".concat(id, \"/\").concat(sanitizeFilename(file.name))).replace(/^\\/+/, \"\");\n                const urlRes = await fetch(\"/api/upload-url\", {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify({\n                        path\n                    })\n                });\n                const urlJson = await urlRes.json();\n                if (!urlRes.ok) {\n                    setStatus(\"Failed to get upload URL: \" + JSON.stringify(urlJson));\n                    return;\n                }\n                const signedUploadUrl = urlJson.signedUploadUrl || urlJson.signedUrl || urlJson.signed_upload_url;\n                if (!signedUploadUrl) {\n                    setStatus(\"Server did not return a signed upload URL.\");\n                    return;\n                }\n                // PUT the binary to the signed URL (don't use anon storage client because RLS/ACL)\n                setStatus(\"Uploading file...\");\n                const putRes = await fetch(signedUploadUrl, {\n                    method: \"PUT\",\n                    headers: {\n                        \"Content-Type\": file.type || \"application/octet-stream\"\n                    },\n                    body: file\n                });\n                if (!putRes.ok) {\n                    const textErr = await putRes.text().catch(()=>String(putRes.status));\n                    setStatus(\"Upload failed: \" + textErr);\n                    return;\n                }\n            }\n            setStatus(\"Confirming upload...\");\n            const confirmRes = await fetch(\"/api/objects/\".concat(id, \"/confirm\"), {\n                method: \"POST\"\n            });\n            const confirmText = await confirmRes.text();\n            if (!confirmRes.ok) {\n                setStatus(\"Confirm failed: \" + confirmText);\n                return;\n            }\n            setCode(returnedCode);\n            if (returnedPin) setPin(returnedPin);\n            setStatus(\"Done — code generated.\");\n        } catch (err) {\n            console.error(\"[UploadForm] unexpected error:\", err);\n            setStatus(\"Error: \" + ((err === null || err === void 0 ? void 0 : err.message) || String(err)));\n        }\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"flex flex-col gap-3\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                children: \"Send to\"\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 151,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"select\", {\n                value: selectedTarget,\n                onChange: (e)=>setSelectedTarget(e.target.value),\n                className: \"p-2 rounded bg-[#0b0d11] text-gray-100\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                        value: \"general\",\n                        children: \"General (PIN protected)\"\n                    }, void 0, false, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 153,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                        value: \"public\",\n                        children: \"Public (no PIN)\"\n                    }, void 0, false, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 154,\n                        columnNumber: 9\n                    }, this),\n                    accounts.map((a)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"option\", {\n                            value: a.id,\n                            children: a.name\n                        }, a.id, false, {\n                            fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                            lineNumber: 155,\n                            columnNumber: 28\n                        }, this))\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 152,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                children: \"Text (optional)\"\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 158,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"textarea\", {\n                value: text,\n                onChange: (e)=>setText(e.target.value),\n                className: \"p-2 rounded bg-[#0b0d11] text-gray-100\",\n                rows: 4\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 159,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"label\", {\n                children: \"File (optional)\"\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 161,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                type: \"file\",\n                onChange: (e)=>{\n                    var _e_target_files;\n                    var _e_target_files_;\n                    return setFile((_e_target_files_ = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0]) !== null && _e_target_files_ !== void 0 ? _e_target_files_ : null);\n                }\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 162,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex gap-2\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"submit\",\n                        className: \"px-3 py-2 bg-blue-500 rounded text-black\",\n                        children: \"Upload\"\n                    }, void 0, false, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 165,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        type: \"button\",\n                        onClick: ()=>{\n                            setFile(null);\n                            setText(\"\");\n                            setSelectedTarget(\"general\");\n                            setStatus(null);\n                            setCode(null);\n                            setPin(null);\n                        },\n                        children: \"Reset\"\n                    }, void 0, false, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 166,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 164,\n                columnNumber: 7\n            }, this),\n            status && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"text-sm mt-2\",\n                children: status\n            }, void 0, false, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 171,\n                columnNumber: 18\n            }, this),\n            code && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"mt-3 p-3 bg-[#071024] rounded\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: \"Share code:\"\n                    }, void 0, false, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 174,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"flex gap-2 items-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"font-mono text-lg px-3 py-2 bg-[#0b1220] rounded\",\n                                children: code\n                            }, void 0, false, {\n                                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                                lineNumber: 176,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                onClick: ()=>navigator.clipboard.writeText(code + (pin ? \" (PIN: \".concat(pin, \")\") : \"\")),\n                                type: \"button\",\n                                children: \"Copy\"\n                            }, void 0, false, {\n                                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                                lineNumber: 177,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 175,\n                        columnNumber: 11\n                    }, this),\n                    pin && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mt-2 text-sm\",\n                        children: [\n                            \"PIN (save this): \",\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                className: \"font-mono\",\n                                children: pin\n                            }, void 0, false, {\n                                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                                lineNumber: 179,\n                                columnNumber: 66\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                        lineNumber: 179,\n                        columnNumber: 19\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n                lineNumber: 173,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/elliott/Library/CloudStorage/OneDrive-Personal/Desktop/Viewport/components/UploadForm.tsx\",\n        lineNumber: 150,\n        columnNumber: 5\n    }, this);\n}\n_s(UploadForm, \"HyBHQ7cbMpW+vAnG5yBUxxZ9Wp4=\");\n_c = UploadForm;\nvar _c;\n$RefreshReg$(_c, \"UploadForm\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvVXBsb2FkRm9ybS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDRCQUE0Qjs7O0FBR3VCO0FBS25ELE1BQU1HLGlCQUFpQixLQUFLLE9BQU87SUFDcEJDO0FBQWYsTUFBTUMsU0FBU0QsQ0FBQUEsMENBQUFBLFFBQXNDLGNBQXRDQSxxREFBQUEsMENBQTBDO0FBRTFDLFNBQVNJOztJQUN0QixNQUFNLENBQUNDLE1BQU1DLFFBQVEsR0FBR1IsK0NBQVFBLENBQWM7SUFDOUMsTUFBTSxDQUFDUyxNQUFNQyxRQUFRLEdBQUdWLCtDQUFRQSxDQUFDO0lBQ2pDLE1BQU0sQ0FBQ1csUUFBUUMsVUFBVSxHQUFHWiwrQ0FBUUEsQ0FBZ0I7SUFDcEQsTUFBTSxDQUFDYSxNQUFNQyxRQUFRLEdBQUdkLCtDQUFRQSxDQUFnQjtJQUNoRCxNQUFNLENBQUNlLEtBQUtDLE9BQU8sR0FBR2hCLCtDQUFRQSxDQUFnQjtJQUU5QyxNQUFNLENBQUNpQixVQUFVQyxZQUFZLEdBQUdsQiwrQ0FBUUEsQ0FBWSxFQUFFO0lBQ3RELE1BQU0sQ0FBQ21CLGdCQUFnQkMsa0JBQWtCLEdBQUdwQiwrQ0FBUUEsQ0FBUztJQUM3RCxNQUFNLENBQUNxQixlQUFlQyxpQkFBaUIsR0FBR3RCLCtDQUFRQSxDQUFnQjtJQUNsRSxNQUFNLENBQUN1QixjQUFjQyxnQkFBZ0IsR0FBR3hCLCtDQUFRQSxDQUFnQjtJQUVoRSw2Q0FBNkM7SUFDL0NELGdEQUFTQSxDQUFDO1FBQ1IsSUFBSTBCLFVBQVU7UUFDZCxlQUFlQztZQUNiLElBQUk7Z0JBQ0Ysd0RBQXdEO2dCQUN4RCxNQUFNQyxNQUFNLE1BQU1DLE1BQU0saUJBQWlCO29CQUFFQyxPQUFPO2dCQUFXO2dCQUM3RCxJQUFJLENBQUNGLElBQUlHLEVBQUUsRUFBRTtvQkFDWEMsUUFBUUMsS0FBSyxDQUFDLDRCQUE0QixNQUFNTCxJQUFJbEIsSUFBSTtvQkFDeEQ7Z0JBQ0Y7Z0JBQ0EsTUFBTXdC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LFFBQVE7NEJBQU9FLFFBQVE7NEJBQUtVLGtCQUFrQjs0QkFBWVIsVUFBVTs0QkFBT0UsUUFBUTs0QkFBT0UsT0FBTzt3QkFBTztrQ0FBRzs7Ozs7Ozs7Ozs7O1lBS2pKTCx3QkFBVSw4REFBQzhGO2dCQUFJWixXQUFVOzBCQUFnQmxGOzs7Ozs7WUFDekNFLHNCQUNDLDhEQUFDNEY7Z0JBQUlaLFdBQVU7O2tDQUNiLDhEQUFDWTtrQ0FBSTs7Ozs7O2tDQUNMLDhEQUFDQTt3QkFBSVosV0FBVTs7MENBQ2IsOERBQUNZO2dDQUFJWixXQUFVOzBDQUFvRGhGOzs7Ozs7MENBQ25FLDhEQUFDNkY7Z0NBQU9DLFNBQVMsSUFBSUMsVUFBVUMsU0FBUyxDQUFDQyxTQUFTLENBQUNqRyxPQUFNRSxDQUFBQSxNQUFJLFVBQWMsT0FBSkEsS0FBSSxPQUFHLEVBQUM7Z0NBQUttQyxNQUFLOzBDQUFTOzs7Ozs7Ozs7Ozs7b0JBRW5HbkMscUJBQU8sOERBQUMwRjt3QkFBSVosV0FBVTs7NEJBQWU7MENBQWlCLDhEQUFDa0I7Z0NBQUtsQixXQUFVOzBDQUFhOUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUs5RjtHQTVLd0JUO0tBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvVXBsb2FkRm9ybS50c3g/NTc4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjb21wb25lbnRzL1VwbG9hZEZvcm0udHN4XG5cInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIi4uL2xpYi9zdXBhYmFzZUNsaWVudFwiO1xuXG50eXBlIEFjY291bnQgPSB7IGlkOiBzdHJpbmc7IG5hbWU6IHN0cmluZyB9O1xuXG5jb25zdCBNQVhfRklMRV9CWVRFUyA9IDEwICogMTAyNCAqIDEwMjQ7XG5jb25zdCBCVUNLRVQgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVE9SQUdFX0JVQ0tFVCA/PyBcImxvY2tlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBVcGxvYWRGb3JtKCkge1xuICBjb25zdCBbZmlsZSwgc2V0RmlsZV0gPSB1c2VTdGF0ZTxGaWxlIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFt0ZXh0LCBzZXRUZXh0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtjb2RlLCBzZXRDb2RlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbcGluLCBzZXRQaW5dID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgW2FjY291bnRzLCBzZXRBY2NvdW50c10gPSB1c2VTdGF0ZTxBY2NvdW50W10+KFtdKTtcbiAgY29uc3QgW3NlbGVjdGVkVGFyZ2V0LCBzZXRTZWxlY3RlZFRhcmdldF0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiZ2VuZXJhbFwiKTtcbiAgY29uc3QgW2N1cnJlbnRVc2VySWQsIHNldEN1cnJlbnRVc2VySWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtzZXNzaW9uVG9rZW4sIHNldFNlc3Npb25Ub2tlbl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBpbnNpZGUgeW91ciBVcGxvYWRGb3JtIGNvbXBvbmVudCB1c2VFZmZlY3RcbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGxldCBtb3VudGVkID0gdHJ1ZTtcbiAgYXN5bmMgZnVuY3Rpb24gbG9hZEFjY291bnRzKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBuby1zdG9yZSBlbnN1cmVzIHdlIGFsd2F5cyBnZXQgdGhlIGxhdGVzdCBmcm9tIHNlcnZlclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL2FjY291bnRzXCIsIHsgY2FjaGU6IFwibm8tc3RvcmVcIiB9KTtcbiAgICAgIGlmICghcmVzLm9rKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBhY2NvdW50czpcIiwgYXdhaXQgcmVzLnRleHQoKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpc3QgPSAoYXdhaXQgcmVzLmpzb24oKSkgYXMgYW55W107XG4gICAgICAvLyBkZWZlbnNpdmUgZmlsdGVyaW5nXG4gICAgICBjb25zdCB2YWxpZCA9IChsaXN0IHx8IFtdKS5maWx0ZXIoYSA9PiBhICYmIGEuaWQgJiYgKGEuZGlzcGxheV9uYW1lID8/IGEubmFtZSkpO1xuICAgICAgaWYgKG1vdW50ZWQpIHNldEFjY291bnRzKHZhbGlkKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwibG9hZEFjY291bnRzIGVycm9yOlwiLCBlKTtcbiAgICB9XG4gIH1cbiAgbG9hZEFjY291bnRzKCk7XG4gIHJldHVybiAoKSA9PiB7IG1vdW50ZWQgPSBmYWxzZTsgfTtcbn0sIFtdKTtcblxuICBmdW5jdGlvbiBzYW5pdGl6ZUZpbGVuYW1lKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1xccysvZywgXCJfXCIpLnJlcGxhY2UoL1teQS1aYS16MC05Ll8tXS9nLCBcIlwiKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChlOiBSZWFjdC5Gb3JtRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2V0U3RhdHVzKG51bGwpO1xuICAgIHNldENvZGUobnVsbCk7XG4gICAgc2V0UGluKG51bGwpO1xuXG4gICAgaWYgKCFmaWxlICYmICF0ZXh0LnRyaW0oKSkge1xuICAgICAgc2V0U3RhdHVzKFwiUGxlYXNlIGF0dGFjaCBhIGZpbGUgb3IgZW50ZXIgc29tZSB0ZXh0IHRvIHNoYXJlLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGZpbGUgJiYgZmlsZS5zaXplID4gTUFYX0ZJTEVfQllURVMpIHtcbiAgICAgIHNldFN0YXR1cyhgRmlsZSB0b28gbGFyZ2Ug4oCUIG1heCAkeyhNQVhfRklMRV9CWVRFUyAvIDEwMjQgLyAxMDI0KS50b0ZpeGVkKDEpfSBNQi5gKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgc2V0U3RhdHVzKFwiQ3JlYXRpbmcgb2JqZWN0IG1ldGFkYXRhIG9uIHNlcnZlci4uLlwiKTtcbiAgICAgIGNvbnN0IGtpbmQgPSBmaWxlID8gKGZpbGUudHlwZS5zdGFydHNXaXRoKFwiaW1hZ2UvXCIpID8gXCJpbWFnZVwiIDogXCJkb2NcIikgOiBcInRleHRcIjtcbiAgICAgIGNvbnN0IHJlY2lwaWVudF9hY2NvdW50X2lkID0gKHNlbGVjdGVkVGFyZ2V0ICE9PSBcImdlbmVyYWxcIiAmJiBzZWxlY3RlZFRhcmdldCAhPT0gXCJwdWJsaWNcIikgPyBzZWxlY3RlZFRhcmdldCA6IG51bGw7XG4gICAgICBjb25zdCBwaW5fcHJvdGVjdGVkID0gc2VsZWN0ZWRUYXJnZXQgPT09IFwiZ2VuZXJhbFwiO1xuXG4gICAgICBjb25zdCBjcmVhdGVCb2R5OiBhbnkgPSB7XG4gICAgICAgIGtpbmQsXG4gICAgICAgIHRpdGxlOiBmaWxlID8gZmlsZS5uYW1lIDogdGV4dC5zbGljZSgwLDgwKSB8fCBcIlVudGl0bGVkXCIsXG4gICAgICAgIG1pbWVfdHlwZTogZmlsZSA/IGZpbGUudHlwZSA6IG51bGwsXG4gICAgICAgIGJ5dGVzOiBmaWxlID8gZmlsZS5zaXplIDogbnVsbCxcbiAgICAgICAgdGV4dF9jb250ZW50OiAhZmlsZSA/IHRleHQgOiBudWxsLFxuICAgICAgICBmaWxlbmFtZTogZmlsZSA/IHNhbml0aXplRmlsZW5hbWUoZmlsZS5uYW1lKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgcmVjaXBpZW50X2FjY291bnRfaWQsXG4gICAgICAgIGNoYW5uZWw6IHNlbGVjdGVkVGFyZ2V0LFxuICAgICAgICBwaW5fcHJvdGVjdGVkLFxuICAgICAgICB1cGxvYWRlcl91c2VyX2lkOiBjdXJyZW50VXNlcklkID8/IHVuZGVmaW5lZCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGNyZWF0ZVJlcyA9IGF3YWl0IGZldGNoKFwiL2FwaS9vYmplY3RzXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjcmVhdGVCb2R5KSxcbiAgICAgIH0pO1xuICAgICAgY29uc3QgY3JlYXRlVGV4dCA9IGF3YWl0IGNyZWF0ZVJlcy50ZXh0KCk7XG4gICAgICBpZiAoIWNyZWF0ZVJlcy5vaykge1xuICAgICAgICBzZXRTdGF0dXMoXCJGYWlsZWQgdG8gY3JlYXRlIG9iamVjdDogXCIgKyBjcmVhdGVUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY3JlYXRlSnNvbiA9IEpTT04ucGFyc2UoY3JlYXRlVGV4dCkgYXMgeyBpZDogc3RyaW5nOyBzdG9yYWdlX3BhdGg6IHN0cmluZyB8IG51bGw7IGNvZGU6IHN0cmluZzsgcGluPzogc3RyaW5nIH07XG4gICAgICBjb25zdCB7IGlkLCBzdG9yYWdlX3BhdGg6IHNlcnZlclN0b3JhZ2VQYXRoLCBjb2RlOiByZXR1cm5lZENvZGUsIHBpbjogcmV0dXJuZWRQaW4gfSA9IGNyZWF0ZUpzb247XG5cbiAgICAgIC8vIHVwbG9hZCBmaWxlIGlmIHByZXNlbnRcbiAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgIHNldFN0YXR1cyhcIlJlcXVlc3Rpbmcgc2lnbmVkIHVwbG9hZCBVUkwuLi5cIik7XG4gICAgICAgIGNvbnN0IHBhdGggPSAoc2VydmVyU3RvcmFnZVBhdGggPz8gYG9iamVjdHMvJHtpZH0vJHtzYW5pdGl6ZUZpbGVuYW1lKGZpbGUubmFtZSl9YCkucmVwbGFjZSgvXlxcLysvLCBcIlwiKTtcbiAgICAgICAgY29uc3QgdXJsUmVzID0gYXdhaXQgZmV0Y2goXCIvYXBpL3VwbG9hZC11cmxcIiwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcGF0aCB9KSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVybEpzb24gPSBhd2FpdCB1cmxSZXMuanNvbigpO1xuICAgICAgICBpZiAoIXVybFJlcy5vaykge1xuICAgICAgICAgIHNldFN0YXR1cyhcIkZhaWxlZCB0byBnZXQgdXBsb2FkIFVSTDogXCIgKyBKU09OLnN0cmluZ2lmeSh1cmxKc29uKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpZ25lZFVwbG9hZFVybCA9IHVybEpzb24uc2lnbmVkVXBsb2FkVXJsIHx8IHVybEpzb24uc2lnbmVkVXJsIHx8IHVybEpzb24uc2lnbmVkX3VwbG9hZF91cmw7XG4gICAgICAgIGlmICghc2lnbmVkVXBsb2FkVXJsKSB7XG4gICAgICAgICAgc2V0U3RhdHVzKFwiU2VydmVyIGRpZCBub3QgcmV0dXJuIGEgc2lnbmVkIHVwbG9hZCBVUkwuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBVVCB0aGUgYmluYXJ5IHRvIHRoZSBzaWduZWQgVVJMIChkb24ndCB1c2UgYW5vbiBzdG9yYWdlIGNsaWVudCBiZWNhdXNlIFJMUy9BQ0wpXG4gICAgICAgIHNldFN0YXR1cyhcIlVwbG9hZGluZyBmaWxlLi4uXCIpO1xuICAgICAgICBjb25zdCBwdXRSZXMgPSBhd2FpdCBmZXRjaChzaWduZWRVcGxvYWRVcmwsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBmaWxlLnR5cGUgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiB9LFxuICAgICAgICAgIGJvZHk6IGZpbGUsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXB1dFJlcy5vaykge1xuICAgICAgICAgIGNvbnN0IHRleHRFcnIgPSBhd2FpdCBwdXRSZXMudGV4dCgpLmNhdGNoKCgpPT5TdHJpbmcocHV0UmVzLnN0YXR1cykpO1xuICAgICAgICAgIHNldFN0YXR1cyhcIlVwbG9hZCBmYWlsZWQ6IFwiICsgdGV4dEVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNldFN0YXR1cyhcIkNvbmZpcm1pbmcgdXBsb2FkLi4uXCIpO1xuICAgICAgY29uc3QgY29uZmlybVJlcyA9IGF3YWl0IGZldGNoKGAvYXBpL29iamVjdHMvJHtpZH0vY29uZmlybWAsIHsgbWV0aG9kOiBcIlBPU1RcIiB9KTtcbiAgICAgIGNvbnN0IGNvbmZpcm1UZXh0ID0gYXdhaXQgY29uZmlybVJlcy50ZXh0KCk7XG4gICAgICBpZiAoIWNvbmZpcm1SZXMub2spIHtcbiAgICAgICAgc2V0U3RhdHVzKFwiQ29uZmlybSBmYWlsZWQ6IFwiICsgY29uZmlybVRleHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHNldENvZGUocmV0dXJuZWRDb2RlKTtcbiAgICAgIGlmIChyZXR1cm5lZFBpbikgc2V0UGluKHJldHVybmVkUGluKTtcbiAgICAgIHNldFN0YXR1cyhcIkRvbmUg4oCUIGNvZGUgZ2VuZXJhdGVkLlwiKTtcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIltVcGxvYWRGb3JtXSB1bmV4cGVjdGVkIGVycm9yOlwiLCBlcnIpO1xuICAgICAgc2V0U3RhdHVzKFwiRXJyb3I6IFwiICsgKGVycj8ubWVzc2FnZSB8fCBTdHJpbmcoZXJyKSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0gY2xhc3NOYW1lPVwiZmxleCBmbGV4LWNvbCBnYXAtM1wiPlxuICAgICAgPGxhYmVsPlNlbmQgdG88L2xhYmVsPlxuICAgICAgPHNlbGVjdCB2YWx1ZT17c2VsZWN0ZWRUYXJnZXR9IG9uQ2hhbmdlPXsoZSk9PnNldFNlbGVjdGVkVGFyZ2V0KGUudGFyZ2V0LnZhbHVlKX0gY2xhc3NOYW1lPVwicC0yIHJvdW5kZWQgYmctWyMwYjBkMTFdIHRleHQtZ3JheS0xMDBcIj5cbiAgICAgICAgPG9wdGlvbiB2YWx1ZT1cImdlbmVyYWxcIj5HZW5lcmFsIChQSU4gcHJvdGVjdGVkKTwvb3B0aW9uPlxuICAgICAgICA8b3B0aW9uIHZhbHVlPVwicHVibGljXCI+UHVibGljIChubyBQSU4pPC9vcHRpb24+XG4gICAgICAgIHthY2NvdW50cy5tYXAoYSA9PiA8b3B0aW9uIGtleT17YS5pZH0gdmFsdWU9e2EuaWR9PnthLm5hbWV9PC9vcHRpb24+KX1cbiAgICAgIDwvc2VsZWN0PlxuXG4gICAgICA8bGFiZWw+VGV4dCAob3B0aW9uYWwpPC9sYWJlbD5cbiAgICAgIDx0ZXh0YXJlYSB2YWx1ZT17dGV4dH0gb25DaGFuZ2U9e2U9PnNldFRleHQoZS50YXJnZXQudmFsdWUpfSBjbGFzc05hbWU9XCJwLTIgcm91bmRlZCBiZy1bIzBiMGQxMV0gdGV4dC1ncmF5LTEwMFwiIHJvd3M9ezR9IC8+XG5cbiAgICAgIDxsYWJlbD5GaWxlIChvcHRpb25hbCk8L2xhYmVsPlxuICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgb25DaGFuZ2U9eyhlKT0+c2V0RmlsZShlLnRhcmdldC5maWxlcz8uWzBdID8/IG51bGwpfSAvPlxuXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggZ2FwLTJcIj5cbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwicHgtMyBweS0yIGJnLWJsdWUtNTAwIHJvdW5kZWQgdGV4dC1ibGFja1wiPlVwbG9hZDwvYnV0dG9uPlxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBvbkNsaWNrPXsoKT0+eyBzZXRGaWxlKG51bGwpOyBzZXRUZXh0KFwiXCIpOyBzZXRTZWxlY3RlZFRhcmdldChcImdlbmVyYWxcIik7IHNldFN0YXR1cyhudWxsKTsgc2V0Q29kZShudWxsKTsgc2V0UGluKG51bGwpOyB9fT5cbiAgICAgICAgICBSZXNldFxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7c3RhdHVzICYmIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1zbSBtdC0yXCI+e3N0YXR1c308L2Rpdj59XG4gICAgICB7Y29kZSAmJiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtMyBwLTMgYmctWyMwNzEwMjRdIHJvdW5kZWRcIj5cbiAgICAgICAgICA8ZGl2PlNoYXJlIGNvZGU6PC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGdhcC0yIGl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb250LW1vbm8gdGV4dC1sZyBweC0zIHB5LTIgYmctWyMwYjEyMjBdIHJvdW5kZWRcIj57Y29kZX08L2Rpdj5cbiAgICAgICAgICAgIDxidXR0b24gb25DbGljaz17KCk9Pm5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGNvZGUrKHBpbj9gIChQSU46ICR7cGlufSlgOlwiXCIpKX0gdHlwZT1cImJ1dHRvblwiPkNvcHk8L2J1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICB7cGluICYmIDxkaXYgY2xhc3NOYW1lPVwibXQtMiB0ZXh0LXNtXCI+UElOIChzYXZlIHRoaXMpOiA8c3BhbiBjbGFzc05hbWU9XCJmb250LW1vbm9cIj57cGlufTwvc3Bhbj48L2Rpdj59XG4gICAgICAgIDwvZGl2PlxuICAgICAgKX1cbiAgICA8L2Zvcm0+XG4gICk7XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJNQVhfRklMRV9CWVRFUyIsInByb2Nlc3MiLCJCVUNLRVQiLCJlbnYiLCJORVhUX1BVQkxJQ19TVE9SQUdFX0JVQ0tFVCIsIlVwbG9hZEZvcm0iLCJmaWxlIiwic2V0RmlsZSIsInRleHQiLCJzZXRUZXh0Iiwic3RhdHVzIiwic2V0U3RhdHVzIiwiY29kZSIsInNldENvZGUiLCJwaW4iLCJzZXRQaW4iLCJhY2NvdW50cyIsInNldEFjY291bnRzIiwic2VsZWN0ZWRUYXJnZXQiLCJzZXRTZWxlY3RlZFRhcmdldCIsImN1cnJlbnRVc2VySWQiLCJzZXRDdXJyZW50VXNlcklkIiwic2Vzc2lvblRva2VuIiwic2V0U2Vzc2lvblRva2VuIiwibW91bnRlZCIsImxvYWRBY2NvdW50cyIsInJlcyIsImZldGNoIiwiY2FjaGUiLCJvayIsImNvbnNvbGUiLCJlcnJvciIsImxpc3QiLCJqc29uIiwidmFsaWQiLCJmaWx0ZXIiLCJhIiwiaWQiLCJkaXNwbGF5X25hbWUiLCJuYW1lIiwiZSIsInNhbml0aXplRmlsZW5hbWUiLCJyZXBsYWNlIiwiaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJ0cmltIiwic2l6ZSIsInRvRml4ZWQiLCJraW5kIiwidHlwZSIsInN0YXJ0c1dpdGgiLCJyZWNpcGllbnRfYWNjb3VudF9pZCIsInBpbl9wcm90ZWN0ZWQiLCJjcmVhdGVCb2R5IiwidGl0bGUiLCJzbGljZSIsIm1pbWVfdHlwZSIsImJ5dGVzIiwidGV4dF9jb250ZW50IiwiZmlsZW5hbWUiLCJ1bmRlZmluZWQiLCJjaGFubmVsIiwidXBsb2FkZXJfdXNlcl9pZCIsImNyZWF0ZVJlcyIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZVRleHQiLCJjcmVhdGVKc29uIiwicGFyc2UiLCJzdG9yYWdlX3BhdGgiLCJzZXJ2ZXJTdG9yYWdlUGF0aCIsInJldHVybmVkQ29kZSIsInJldHVybmVkUGluIiwicGF0aCIsInVybFJlcyIsInVybEpzb24iLCJzaWduZWRVcGxvYWRVcmwiLCJzaWduZWRVcmwiLCJzaWduZWRfdXBsb2FkX3VybCIsInB1dFJlcyIsInRleHRFcnIiLCJjYXRjaCIsIlN0cmluZyIsImNvbmZpcm1SZXMiLCJjb25maXJtVGV4dCIsImVyciIsIm1lc3NhZ2UiLCJmb3JtIiwib25TdWJtaXQiLCJjbGFzc05hbWUiLCJsYWJlbCIsInNlbGVjdCIsInZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJvcHRpb24iLCJtYXAiLCJ0ZXh0YXJlYSIsInJvd3MiLCJpbnB1dCIsImZpbGVzIiwiZGl2IiwiYnV0dG9uIiwib25DbGljayIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsInNwYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/UploadForm.tsx\n"));

/***/ })

});